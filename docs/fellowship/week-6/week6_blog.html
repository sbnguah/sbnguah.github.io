<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Samuel Blay Nguah">
<meta name="dcterms.date" content="2025-09-06">
<meta name="description" content="Convince Me! Writing the Justification (Rationale) of the Proposal">

<title>Week 6</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cb1ee970987b209eb749107ed30f9c25.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/mylogo.jpg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trainees-corner" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trainees’ Corner</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-trainees-corner">    
        <li>
    <a class="dropdown-item" href="../../students.html">
 <span class="dropdown-text">Undergraduate</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../membership.html">
 <span class="dropdown-text">Membership</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../fellowship.html">
 <span class="dropdown-text">Fellowship</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../stats2024.html">
 <span class="dropdown-text">Advanced Stats, 2024</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sbnguah/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=gbehSqQAAAAJ&amp;hl=en"> <i class="bi bi-google" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/NguahSamue66067/"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/samuel-blay-nguah-4423a410/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section"></a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#why-is-justification-important" id="toc-why-is-justification-important" class="nav-link" data-scroll-target="#why-is-justification-important">Why is Justification Important?</a></li>
  <li><a href="#from-global-to-local" id="toc-from-global-to-local" class="nav-link" data-scroll-target="#from-global-to-local">From Global to Local</a></li>
  <li><a href="#highlighting-novelty" id="toc-highlighting-novelty" class="nav-link" data-scroll-target="#highlighting-novelty">Highlighting Novelty</a></li>
  <li><a href="#linking-to-impact" id="toc-linking-to-impact" class="nav-link" data-scroll-target="#linking-to-impact">Linking to Impact</a></li>
  <li><a href="#balancing-ambition-and-feasibility" id="toc-balancing-ambition-and-feasibility" class="nav-link" data-scroll-target="#balancing-ambition-and-feasibility">Balancing Ambition and Feasibility</a></li>
  <li><a href="#analogy-the-grandmother-test" id="toc-analogy-the-grandmother-test" class="nav-link" data-scroll-target="#analogy-the-grandmother-test">Analogy: The Grandmother Test</a></li>
  <li><a href="#example-justification" id="toc-example-justification" class="nav-link" data-scroll-target="#example-justification">Example Justification</a></li>
  <li><a href="#summary-take-home-message" id="toc-summary-take-home-message" class="nav-link" data-scroll-target="#summary-take-home-message">Summary &amp; Take-Home Message</a></li>
  <li><a href="#next-weeks-prelude" id="toc-next-weeks-prelude" class="nav-link" data-scroll-target="#next-weeks-prelude">Next Week’s Prelude</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 6</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Research</div>
    <div class="quarto-category">Proposal</div>
    <div class="quarto-category">Intro</div>
  </div>
  </div>

<div>
  <div class="description">
    <strong>Convince Me! Writing the Justification (Rationale) of the Proposal</strong>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Samuel Blay Nguah </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 6, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
<div class="center" style="color: #820263; face: bold;">
<p><em>“Until the lion tells his side of the story, the tale of the hunt will always glorify the hunter.”</em></p>
</div>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Every research proposal has a beating heart. No, it’s not the introduction, nor even the methodology. The heart is the <strong>justification (or rationale)</strong>, the part that explains <em>why</em> the study matters at all. A well-crafted justification convinces your examiners that your proposal is not just an academic exercise to pass your fellowship exams, but a meaningful piece of work that addresses a real and pressing problem.</p>
<p>If the introduction is the <em>“what”</em> of your study, the justification is the <em>“so what.</em>” And believe me, without a good “so what,” your examiners might flip through your proposal the way we sometimes flip through the adverts on TV, uninterested, unimpressed, and ready to move on.</p>
</section>
<section id="why-is-justification-important" class="level2">
<h2 class="anchored" data-anchor-id="why-is-justification-important">Why is Justification Important?</h2>
<p>The justification is your <em>sales pitch</em>. It’s where you persuade your examiners that your study is not only feasible but also worth doing. Both the <strong>West African College of Physicians (WACP)</strong> and the <strong>Ghana College of Physicians and Surgeons (GCPS)</strong> take this section seriously.</p>
<p>Examiners want to know:</p>
<ul>
<li>Why should this problem matter to Ghana, West Africa, or Africa as a whole?</li>
<li>Why now, and not ten years ago?</li>
<li>What difference will your findings make to paediatric practice, policy, or patient outcomes?</li>
</ul>
<p>In other words, your justification answers the examiner’s hidden question: <em>“If I let you spend time and resources on this, will it be worth it?”</em></p>
</section>
<section id="from-global-to-local" class="level2">
<h2 class="anchored" data-anchor-id="from-global-to-local">From Global to Local</h2>
<p>One of the common mistakes residents make is loading the justification with global statistics: WHO reports, UNICEF data, or Lancet articles quoting worldwide disease burdens. While useful, these are not enough. Examiners in Accra, Kumasi, Lagos, or Freetown will ask: <em>“Yes, but what about us? Where is the African or Ghanaian data?”</em></p>
<p>For example, saying, <em>“Malaria causes over 400,000 deaths annually worldwide,”</em> is fine, but it doesn’t prove why you should do a study in Kumasi. A stronger argument is: <em>“Despite Ghana’s malaria control strategies, the case fatality rate among children under five admitted with severe malaria at Komfo Anokye Teaching Hospital remains above the national target.”</em> Now you have global importance <em>and</em> local urgency.</p>
<p>Both WACP and GCPS explicitly ask you to cite <strong>African literature</strong> for this reason. Without it, your proposal risks sounding like it was cut and pasted from a European or American textbook.</p>
</section>
<section id="highlighting-novelty" class="level2">
<h2 class="anchored" data-anchor-id="highlighting-novelty">Highlighting Novelty</h2>
<p>Another trap is to sound repetitive. You don’t want your justification to read like the hundred malaria proposals your examiners have seen before. The key is <strong>novelty</strong>. Novelty doesn’t always mean studying something brand new. It can mean:</p>
<ul>
<li>Studying an existing problem in a new population (e.g., neonates instead of school-aged children).</li>
<li>Using a different approach (e.g., using biomarkers instead of clinical predictors).</li>
<li>Filling a local evidence gap (e.g., few studies in Kumasi despite national data elsewhere).</li>
</ul>
<p>Think of it this way: Your justification should convince your reader that if your study isn’t done, something important will remain unknown.</p>
</section>
<section id="linking-to-impact" class="level2">
<h2 class="anchored" data-anchor-id="linking-to-impact">Linking to Impact</h2>
<p>Impact is the soul of justification. Examiners are busy clinicians and researchers. They are asking: <em>“How will this improve child health in my hospital, district, or country?”</em></p>
<p>A strong justification links your research question to potential action. For example:</p>
<ul>
<li>Predictors of mortality in severe malaria can refine triage protocols.</li>
<li>A study on vaccine uptake can guide targeted community education.</li>
<li>An audit of antibiotic use can inform antimicrobial stewardship policies.</li>
</ul>
<p>Impact does not mean you must save the world. It simply means your study should have the potential to make a measurable, relevant difference.</p>
</section>
<section id="balancing-ambition-and-feasibility" class="level2">
<h2 class="anchored" data-anchor-id="balancing-ambition-and-feasibility">Balancing Ambition and Feasibility</h2>
<p>Every resident dreams of doing a groundbreaking study. But justification also needs <strong>realism</strong>. Examiners want to know: <em>Can this project be done with your time, resources, and setting?</em> A study requiring genetic sequencing when your hospital lab struggles with complete blood counts is not feasible.</p>
<p>So, balance ambition with feasibility. You can be impactful without being impossible. Remember, a good thesis is not the biggest or most expensive study, but the one that answers a clear question well within your limits.</p>
</section>
<section id="analogy-the-grandmother-test" class="level2">
<h2 class="anchored" data-anchor-id="analogy-the-grandmother-test">Analogy: The Grandmother Test</h2>
<p>Imagine trying to convince your grandmother to buy you a new phone. If you say, <em>“I want it because everyone else has it,”</em> she will shake her head. But if you explain, <em>“I need it because I get urgent calls from the hospital about sick children, and my current phone dies suddenly,”</em> she’ll see the urgency.</p>
<p>That’s exactly how your justification should sound: not just <em>this problem exists</em>, but <em>this problem matters to us, now, and solving it has clear benefits.</em></p>
</section>
<section id="example-justification" class="level2">
<h2 class="anchored" data-anchor-id="example-justification">Example Justification</h2>
<p><strong>Title:</strong> Predictors of Mortality in Severe Malaria in Children Under Five Years in Kumasi, Ghana</p>
<p>Malaria remains the leading cause of childhood morbidity and mortality in Ghana, with severe malaria accounting for a significant proportion of hospital admissions and deaths among children under five. Despite improvements in malaria control strategies, case fatality rates remain unacceptably high at tertiary hospitals, particularly in resource-limited settings such as Kumasi. Identifying predictors of mortality in severe malaria is crucial for improving early recognition of high-risk children and guiding timely interventions that may save lives.</p>
<p>Several studies in East Africa have reported factors associated with poor outcomes in severe malaria, including cerebral involvement, severe anaemia, and delayed presentation. However, few studies have comprehensively examined these predictors in Ghana, and none have specifically focused on Kumasi. Given the regional variations in clinical presentations and health system capacities, local data are urgently needed.</p>
<p>This study will generate evidence directly relevant to clinical care in Kumasi. By identifying the predictors of mortality among children under five with severe malaria, it can inform the development of locally adapted triage tools and management protocols. The findings may also serve as a baseline for evaluating future interventions and contribute to national strategies aimed at reducing under-five mortality. Ultimately, the study’s impact extends beyond academic fulfilment — it can help save lives.</p>
<hr>
</section>
<section id="summary-take-home-message" class="level2">
<h2 class="anchored" data-anchor-id="summary-take-home-message">Summary &amp; Take-Home Message</h2>
<p>There you have it. The justification is your research proposal’s heartbeat. It transforms your study from “interesting” to “essential.” A strong justification:</p>
<ul>
<li>Explains why the problem matters.</li>
<li>Grounds it in local data and African context.</li>
<li>Highlights novelty or a knowledge gap.</li>
<li>Links the study to meaningful impact.</li>
<li>Balances ambition with feasibility.</li>
</ul>
<p>When written well, it convinces examiners that your project is not only worth doing but also worth approving quickly. Remember, if the introduction lights the fire, the justification must keep it burning brightly.</p>
</section>
<section id="next-weeks-prelude" class="level2">
<h2 class="anchored" data-anchor-id="next-weeks-prelude">Next Week’s Prelude</h2>
<p>Next week, we move from “why this study matters” to “what exactly it aims to do”: <strong>“Setting the Objectives of the Proposal.”</strong> Get ready to learn how to write SMART objectives that can make or break your thesis.</p>
<p>So…write your justification like a persuasive market woman selling her last basket of mangoes: confident, urgent, and impossible to ignore. <em>See you next week!</em></p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ol type="1">
<li>Mbuagbaw L, Lawson DO, Puljak L, Allison DB, Thabane L. A tutorial on writing a research proposal. <em>CMAJ</em>. 2020;192(13):E332–E338. doi:10.1503/cmaj.190366<br>
</li>
<li>Oduro AR, Koram KA, Rogers W, Atuguba F, Ansah P, Anyorigiya T, et al.&nbsp;Severe falciparum malaria in young children of the Kassena-Nankana District of northern Ghana. <em>Malar J</em>. 2007;6:96. doi:10.1186/1475-2875-6-96<br>
</li>
<li>Olumese P, Snow RW, Omoluabi E, et al.&nbsp;Clinical features predicting mortality in children with severe malaria: evidence from multi-country studies. <em>Malar J</em>. 2019;18(1):144. doi:10.1186/s12936-019-2781-0</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
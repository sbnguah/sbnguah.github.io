<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Samuel Blay Nguah">
<meta name="dcterms.date" content="2025-10-04">
<meta name="description" content="Standing on the Shoulders of Giants: Writing the Literature Review (Part 1)">

<title>Week 9</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cb1ee970987b209eb749107ed30f9c25.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/mylogo.jpg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trainees-corner" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trainees’ Corner</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-trainees-corner">    
        <li>
    <a class="dropdown-item" href="../../students.html">
 <span class="dropdown-text">Undergraduate</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../membership.html">
 <span class="dropdown-text">Membership</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../fellowship.html">
 <span class="dropdown-text">Fellowship</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../stats2024.html">
 <span class="dropdown-text">Advanced Stats, 2024</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sbnguah/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=gbehSqQAAAAJ&amp;hl=en"> <i class="bi bi-google" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/NguahSamue66067/"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/samuel-blay-nguah-4423a410/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#recap" id="toc-recap" class="nav-link active" data-scroll-target="#recap"><strong>Recap…</strong></a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#why-write-a-literature-review" id="toc-why-write-a-literature-review" class="nav-link" data-scroll-target="#why-write-a-literature-review">Why Write a Literature Review?</a></li>
  <li><a href="#what-is-a-literature-review" id="toc-what-is-a-literature-review" class="nav-link" data-scroll-target="#what-is-a-literature-review">What is a Literature Review?</a></li>
  <li><a href="#step-1-searching-for-the-evidence" id="toc-step-1-searching-for-the-evidence" class="nav-link" data-scroll-target="#step-1-searching-for-the-evidence">Step 1: Searching for the Evidence</a></li>
  <li><a href="#step-2-sorting-what-youve-found" id="toc-step-2-sorting-what-youve-found" class="nav-link" data-scroll-target="#step-2-sorting-what-youve-found">Step 2: Sorting What You’ve Found</a></li>
  <li><a href="#step-3-structuring-your-review" id="toc-step-3-structuring-your-review" class="nav-link" data-scroll-target="#step-3-structuring-your-review">Step 3: Structuring Your Review</a></li>
  <li><a href="#step-4-critical-reading" id="toc-step-4-critical-reading" class="nav-link" data-scroll-target="#step-4-critical-reading">Step 4: Critical Reading</a></li>
  <li><a href="#step-5-identifying-the-gaps" id="toc-step-5-identifying-the-gaps" class="nav-link" data-scroll-target="#step-5-identifying-the-gaps">Step 5: Identifying the Gaps</a></li>
  <li><a href="#take-home-message" id="toc-take-home-message" class="nav-link" data-scroll-target="#take-home-message">Take-Home Message</a></li>
  <li><a href="#next-week" id="toc-next-week" class="nav-link" data-scroll-target="#next-week">Next Week…</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 9</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Research</div>
    <div class="quarto-category">Proposal</div>
    <div class="quarto-category">Literature</div>
  </div>
  </div>

<div>
  <div class="description">
    <strong>Standing on the Shoulders of Giants: Writing the Literature Review (Part 1)</strong>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr Samuel Blay Nguah </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 4, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="center" style="color: #820263; face: bold;">
<p>“<em>Wisdom does not come overnight; it is gathered piece by piece by those who seek the truth.</em>”</p>
</div>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap"><strong>Recap…</strong></h2>
<p>Last week, we learned how to state a solid hypothesis, your bold prediction that keeps reviewers awake and statisticians employed.</p>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Congratulations! You’ve defined your research question, justified your study, and crafted clear objectives. Now comes the part that makes many residents sigh, scroll endlessly through PubMed, and whisper to themselves, “<em>Wasn’t this supposed to be the easy part?</em>” Yes, dear reader, it’s time to tackle the <strong>literature review</strong>.</p>
<p>The literature review is the foundation upon which your proposal rests. It demonstrates that you know <u>what’s been done</u>, <u>what’s missing</u>, and <u>why your study is necessary</u>. Think of it as your opportunity to show the assessors that you didn’t wake up one morning and decide to study “something interesting.” Rather, you’ve surveyed the landscape, identified the gaps, and are now ready to build something meaningful on that ground.</p>
</section>
<section id="why-write-a-literature-review" class="level2">
<h2 class="anchored" data-anchor-id="why-write-a-literature-review">Why Write a Literature Review?</h2>
<p>A literature review is not an exercise in showing how many articles you can download. Rather, it’s a strategic narrative that:</p>
<ol type="1">
<li><strong>Provides context</strong> for your study.</li>
<li><strong>Shows gaps</strong> in existing knowledge.</li>
<li><strong>Demonstrates familiarity</strong> with prior work in your field.</li>
<li><strong>Justifies</strong> your study design and approach.</li>
<li><strong>Lays the groundwork</strong> for your hypothesis or research objectives.</li>
</ol>
<p>In short, it tells the story of what is known, what is unknown, and what you intend to discover.</p>
<p>According to Green et al.&nbsp;(2006), a well-written literature review “<em>clarifies the conceptual framework of the research and situates it within existing theory and evidence.</em>”¹</p>
</section>
<section id="what-is-a-literature-review" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-literature-review">What is a Literature Review?</h2>
<p>Many senior residents make the same newbie mistake by confusing <strong>“reviewing literature”</strong> with <strong>“listing literature.”</strong>. Literature review is:</p>
<ul>
<li><strong>Not:</strong> “Ten studies have shown this. Five studies have shown that.”</li>
<li><strong>But:</strong> “Most studies in sub-Saharan Africa have focused on hospitalised populations, leaving community-level prevalence under-explored.”</li>
</ul>
<p>A good review is <u><em>synthesised</em></u><strong>,</strong> not <u><em>summarised</em></u>. It connects the dots instead of scattering them.</p>
</section>
<section id="step-1-searching-for-the-evidence" class="level2">
<h2 class="anchored" data-anchor-id="step-1-searching-for-the-evidence">Step 1: Searching for the Evidence</h2>
<p>Start with broad search terms and then narrow them. Use recognised databases such as PubMed, Google Scholar, and African Journals Online (AJOL) to capture both global and local evidence.</p>
<p>Tips for efficient searching:</p>
<ol type="1">
<li>Use <strong>Boolean operators</strong> (“AND”, “OR”, “NOT”) to refine your searches.</li>
<li>Set <strong>filters</strong> (last 10 years, humans, children, English).</li>
<li>Keep a <strong>search diary;</strong> your assessors might wonder how you identified your sources.</li>
<li>Don’t forget the <strong>grey literature</strong> (theses, Ministry of Health reports, WHO bulletins).</li>
</ol>
<blockquote class="blockquote">
<p>Example: For “Predictors of mortality in severe malaria in children,” start with “severe malaria AND children AND mortality” and later narrow to “predictors of mortality in severe malaria AND Ghana.”</p>
</blockquote>
</section>
<section id="step-2-sorting-what-youve-found" class="level2">
<h2 class="anchored" data-anchor-id="step-2-sorting-what-youve-found">Step 2: Sorting What You’ve Found</h2>
<p>After collecting papers, <u>don’t rush to read everything.</u> Skim abstracts first. Keep only what’s relevant to:</p>
<ol type="1">
<li>Your study population (e.g., children under 5 years).</li>
<li>Your geographical region (e.g., West Africa).</li>
<li>Your study question (e.g., mortality predictors).</li>
</ol>
<p>Use a reference manager like Zotero, Mendeley, or EndNote, and your sanity will thank you later.</p>
<p>Organise your papers into thematic folders:</p>
<ol type="1">
<li>Epidemiology and burden</li>
<li>Risk factors</li>
<li>Clinical presentation</li>
<li>Management and outcomes</li>
<li>Knowledge gaps</li>
</ol>
<p>This thematic organisation will guide your writing structure later.</p>
</section>
<section id="step-3-structuring-your-review" class="level2">
<h2 class="anchored" data-anchor-id="step-3-structuring-your-review">Step 3: Structuring Your Review</h2>
<p>A literature review generally follows a <em>funnel structure</em>, from the general to the specific:</p>
<ol type="1">
<li><strong>Start broad:</strong> Describe the global picture (e.g., global burden of severe malaria).</li>
<li><strong>Narrow down:</strong> Move to African studies, then to Ghana or your study region.</li>
<li><strong>Zoom in:</strong> Highlight specific knowledge gaps directly linked to your research question.</li>
</ol>
<p>This approach mirrors what most assessors expect in both WACP and GCPS proposals, a logical flow from context to rationale.</p>
<blockquote class="blockquote">
<p>Example:<br>
- <em>Global</em>: “Severe malaria remains a leading cause of childhood mortality in sub-Saharan Africa.”<br>
- <em>Regional</em>: “In West Africa, despite improved diagnostic capacity, mortality remains high.”<br>
- <em>Local</em>: “In Kumasi, data on predictors of mortality among children with severe malaria are limited.”</p>
</blockquote>
</section>
<section id="step-4-critical-reading" class="level2">
<h2 class="anchored" data-anchor-id="step-4-critical-reading">Step 4: Critical Reading</h2>
<p>Don’t just report what authors found, evaluate it. Ask:</p>
<ol type="1">
<li>Was the study design appropriate?</li>
<li>Were the sample sizes adequate?</li>
<li>How similar are their settings to mine?</li>
<li>What did they miss?</li>
</ol>
<p>This critical analysis shows your maturity as a researcher. It distinguishes a literature review from a literature recital. As Grant &amp; Booth (2009) put it, “<em>A review that merely summarises is of limited value; synthesis that provides new perspectives is the hallmark of scholarship.</em>”²</p>
</section>
<section id="step-5-identifying-the-gaps" class="level2">
<h2 class="anchored" data-anchor-id="step-5-identifying-the-gaps">Step 5: Identifying the Gaps</h2>
<p>Once you’ve summarised and critiqued, highlight what remains unanswered. For instance:</p>
<blockquote class="blockquote">
<p>“<em>Although several studies in Ghana have explored severe malaria outcomes, none have specifically examined the role of metabolic derangements as predictors of mortality among children under five</em>.”</p>
</blockquote>
<p>This statement naturally leads to your <em>justification</em> and <em>objectives</em>.</p>
</section>
<section id="take-home-message" class="level2">
<h2 class="anchored" data-anchor-id="take-home-message">Take-Home Message</h2>
<p>Your literature review is not a dump of articles; it’s your intellectual argument about what is known, what is not known, and why your study matters. Think of it as your <strong>academic GPS;</strong> it tells readers where you are coming from, where you are, and where you are headed.</p>
<p>So, before you start writing, plan your route. Search smart, organise your findings, and critically appraise your sources. Remember: <em>You are not writing to impress, but to inform</em>.</p>
</section>
<section id="next-week" class="level2">
<h2 class="anchored" data-anchor-id="next-week">Next Week…</h2>
<p>Next week, we’ll roll up our sleeves and tackle <strong>“Writing and Synthesising the Literature Review (Part 2)”</strong>, where you’ll learn how to blend findings like a master chef, not just serve them raw.</p>
<p>Until then, remember: <em>A researcher who copies too much literature ends up reviewing their supervisor’s patience instead of the evidence!</em> See you next week.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ol type="1">
<li>Green BN, Johnson CD, Adams A. Writing narrative literature reviews for peer-reviewed journals: secrets of the trade. <em>J Chiropr Med.</em> 2006;5(3):101–117.<br>
</li>
<li>Grant MJ, Booth A. A typology of reviews: an analysis of 14 review types and associated methodologies. <em>Health Info Libr J.</em> 2009;26(2):91–108.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>